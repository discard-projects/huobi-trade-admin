webpackJsonp([11],{SScm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),n=a.n(i),r=a("AISp"),o={mixins:[a("gMjF").a],watch:{"form.dic_area_id_with_parents":{handler:function(e){e&&e.length?this.form.dic_area_id=e[e.length-1]:this.form.dic_area_id=null},deep:!0}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"category"}},[a("ex-options-select",{attrs:{options:[{label:"工人",value:"category_worker"}]},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1),e._v(" "),e.originForm?a("el-form-item",{attrs:{label:"地区",prop:"dic_area_id_with_parents"}},[a("area-cascader",{model:{value:e.form.dic_area_id_with_parents,callback:function(t){e.$set(e.form,"dic_area_id_with_parents",t)},expression:"form.dic_area_id_with_parents"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{type:"textarea",placeholder:"添加描述"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.uploading,disabled:e.fetching},on:{click:function(t){return e.onSubmit("form")}}},[e._v(e._s(e.form.id?"更新":"创建"))]),e._v(" "),e.form.id?e._e():a("el-button",{on:{click:function(t){return e.onReset("form")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]},s=a("C7Lr")(o,l,!1,null,null,null).exports,c={data:function(){return{dialogVisible:!0,form:{name:""}}},methods:{handler:function(){var e=this;return this.api.createDicOrganization(this.form).then(function(t){t.data;e.$root.owner.fetchData(),e.$ext.unmount(e)})}},components:{innerForm:s}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("inner-form",{attrs:{form:e.form,handler:e.handler}})],1)},staticRenderFns:[]},d=a("C7Lr")(c,m,!1,null,null,null).exports,u={mixins:[a("gf7+").a],methods:{fetchData:function(){return this._fetchData(this.api.getDicOrganization(this.item.id))},handler:function(){return this._handler(this.api.updateDicOrganization(this.item.id,this.form))}},components:{innerForm:s}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("inner-form",{attrs:{form:e.form,handler:e.handler,fetching:e.fetching}})],1)},staticRenderFns:[]},h=a("C7Lr")(u,f,!1,null,null,null).exports,p={mixins:[r.a],methods:{fetchData:function(){this._fetchData(this.api.getDicOrganizations(this.mixTableParams))},showNewDialog:function(){this.$ext.mount(d,{onEl:this.$el,data:{owner:this}})},showEditDialog:function(e){this.$ext.mount(h,{onEl:this.$el,props:{item:e},data:{owner:this}})},destroy:function(e){var t=this;this.$confirm("确定要删除该条信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(a){"confirm"===a&&(t.$set(e,"deleting",!0),t.api.deleteDicOrganization(e.id).then(function(a){t.$set(e,"deleting",!1),t.$message.success("删除成功了！"),t.fetchData()}).catch(function(a){console.error(a),t.$message.error("删除报错了！"),t.$set(e,"deleting",!1)}))}})},updatePosition:function(e,t){console.log(e,t)}},created:function(){var e=this;this.mixTableData=n()(this.mixTableData,{queryIntros:[{control:"input",key:"q_name_cont",placeholder:"名称"}],dragable:function(t,a,i){e.api.updateDicOrganizationPosition(t.id,{position:a}).then(function(t){e.fetchData()}).catch(function(t){console.error(t),e.fetchData()})},dataIntros:[{label:"#",key:"id",width:80},{label:"名称",key:"name"},{label:"创建时间",key:"created_time"},{label:"更新时间",key:"updated_time"}],opIntro:{label:"操作",width:180}})}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ex-table",{attrs:{tableData:e.mixTableData},on:{refetch:e.fetchData},scopedSlots:e._u([{key:"search-bar-item",fn:function(t){var i=t.search;return[a("el-form-item",{key:i.key,attrs:{label:i.label}},[a("ex-options-select",{attrs:{options:[{label:"工作者",value:"category_worker"}]},model:{value:e.mixTableData.query[i.key],callback:function(t){e.$set(e.mixTableData.query,i.key,t)},expression:"mixTableData.query[search.key]"}})],1)]}},{key:"table-operations",fn:function(t){var i=t.row;return t.$index,t.intro,[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.showEditDialog(i)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",loading:i.deleting},on:{click:function(t){return e.destroy(i)}}},[e._v("删除")])]}}])},[e._v(" "),a("div",{attrs:{slot:"search-bar-operations"},slot:"search-bar-operations"},[a("el-button",{attrs:{size:"small"},on:{click:e.showNewDialog}},[e._v("新增")])],1)])],1)},staticRenderFns:[]},b=a("C7Lr")(p,_,!1,null,null,null);t.default=b.exports}});